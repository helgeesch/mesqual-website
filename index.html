<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MESQUAL</title>
    <link rel="icon" type="image/svg+xml" href="https://raw.githubusercontent.com/helgeesch/mesqual/18fe3fc20bace115a116555b2872d57925698e48/assets/logo-turq.svg">
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <nav class="main-nav">
        <div class="container">
            <a href="#" class="nav-logo">
                <img src="https://raw.githubusercontent.com/helgeesch/mesqual/18fe3fc20bace115a116555b2872d57925698e48/assets/logo-turq.svg" alt="MESQUAL Logo" class="logo-img">
                <span>MESQUAL</span>
            </a>
            <div class="nav-links">
                <a href="#use-cases">Use Cases</a>
                <a href="#modules">Modules</a>
                <a href="#extensibility">Extend</a>
                <a href="#example-studies">Example Studies</a>
                <a href="https://docs.mesqual.io" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                <a href="https://github.com/helgeesch/mesqual" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>GitHub</a>
            </div>
        </div>
    </nav>

    <header class="hero">
        <div class="container">
            <h1>The Pythonic Framework for Energy Scenario Comparison &amp; Analysis</h1>
            <p class="subtitle">MESQUAL &mdash; Modular Energy Scenario Comparison Library for Quantitative and Qualitative Analysis</p>
            <div class="hero-pills">
                <span class="hero-pill">Fully Modular</span>
                <span class="hero-pill">Platform-Independent</span>
                <span class="hero-pill">Built to Extend</span>
            </div>
            <p class="hero-tagline">Compare, visualize, and analyze simulation results and market data across any energy modeling platform.</p>
            <div class="hero-cta">
                 <a href="https://docs.mesqual.io/mesqual-study-01/" target="_blank" rel="noopener noreferrer" class="button button-primary button-large button-with-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM11.2318 17.5255C10.9469 17.5255 10.712 17.29 10.712 16.9745V7.02551C10.712 6.71 10.9469 6.47451 11.2318 6.47451C11.5167 6.47451 11.7516 6.71 11.7516 7.02551V16.9745C11.7516 17.29 11.5167 17.5255 11.2318 17.5255ZM15.7551 14.2882C15.4702 14.2882 15.2353 14.0527 15.2353 13.7372V10.2628C15.2353 9.94726 15.4702 9.71178 15.7551 9.71178C16.04 9.71178 16.2749 9.94726 16.2749 10.2628V13.7372C16.2749 14.0527 16.04 14.2882 15.7551 14.2882ZM6.70863 14.2882C6.42373 14.2882 6.18884 14.0527 6.18884 13.7372V10.2628C6.18884 9.94726 6.42373 9.71178 6.70863 9.71178C6.99352 9.71178 7.22841 9.94726 7.22841 10.2628V13.7372C7.22841 14.0527 6.99352 14.2882 6.70863 14.2882Z"/></svg>
                    Try now in Colab
                </a>
            </div>
        </div>
    </header>

    <main>
        <section id="use-cases" class="section interactive-demo">
            <div class="container">
                <div class="code-viewer-container">
                    <!-- Left and Right Panes -->
                    <div class="code-panes">
                        <!-- Left Pane -->
                        <div class="code-pane">
                            <div class="pane-label">
                                <span class="pane-label-title">&#9312; Setup StudyManager</span>
                                <span class="pane-label-subtitle">Feed it with scenarios from any platform interface</span>
                            </div>
                            <div class="tabs" id="setup-tabs">
                                <button class="tab-button active" data-setup="pypsa">PyPSA</button>
                                <button class="tab-button" data-setup="plexos">Plexos</button>
                                <!-- Add more setup tabs here -->
                            </div>
                            <div class="code-content">
                                <pre><code id="setup-code" class="language-python"></code></pre>
                            </div>
                        </div>
                        <!-- Right Pane -->
                        <div class="code-pane">
                            <div class="pane-label">
                                <span class="pane-label-title">&#9313; Analyze with MESQUAL</span>
                                <span class="pane-label-subtitle">Same API and modules across all platforms &mdash; only the setup flags change</span>
                            </div>
                            <div class="tabs" id="pipeline-tabs">
                                <button class="tab-button active" data-pipeline="fetch">Fetch</button>
                                <button class="tab-button" data-pipeline="heat">Heatmap</button>
                                <button class="tab-button" data-pipeline="line">Line Chart</button>
                                <button class="tab-button" data-pipeline="map">Map</button>
                            </div>
                            <div class="code-content">
                                <pre><code id="pipeline-code" class="language-python"></code></pre>
                            </div>
                            <div class="code-source-links">
                                <a id="docs-source-link" class="code-source-icon" href="#" target="_blank" title="View documentation">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
                                </a>
                                <a id="github-source-link" class="code-source-icon" href="#" target="_blank" title="View source on GitHub">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- Preview Pane -->
                    <div class="preview-pane collapsed" id="preview-pane">
                        <div class="preview-header">
                            <span class="preview-label">Output Preview</span>
                            <button id="fullscreen-btn" class="preview-expand-btn" title="Fullscreen preview">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg>
                                Fullscreen
                            </button>
                        </div>
                        <div class="preview-content">
                            <div class="preview-spinner" id="preview-spinner">
                                <div class="spinner"></div>
                                <span class="spinner-text">Loading preview&hellip;</span>
                            </div>
                            <iframe id="preview-frame" src="about:blank"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="modules" class="section">
            <div class="container">
                <div class="section-header">
                    <h2>Modules and Data Classes</h2>
                    <p>MESQUAL gives you atomic building blocks that enable you to build up intuitive representations of real-world energy assets with expressive notation.</p>
                </div>
                <div class="modules-grid">
                    <div class="module-card">
                        <div class="module-header">
                            <i data-lucide="layout-dashboard"></i>
                            <h3>StudyManager</h3>
                        </div>
                        <div class="module-classes">
                            <code>StudyManager</code>
                            <br>
                            <code>.scen</code>
                            <code>.comp</code>
                            <br>
                            <code>.scen_comp</code>
                        </div>
                        <p>Central orchestrator with three-tier <code>DatasetCollection</code> access: scenarios, comparisons, and unified views.</p>
                        <div class="module-links">
                            <a href="https://github.com/helgeesch/mesqual/blob/main/mesqual/study_manager.py" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View code</a>
                            <a href="https://docs.mesqual.io/mesqual-package-documentation/api_reference/study_manager/" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                        </div>
                    </div>
                    <div class="module-card">
                    <div class="module-header">
                        <i data-lucide="database"></i>
                        <h3>Datasets &amp; Interpreters</h3>
                    </div>
                    <div class="module-classes">
                        <code>PlatformDataset</code>
                        <code>DatasetMergeCollection</code>
                        <code>DatasetConcatCollection</code>
                    </div>
                    <p>"Everything is a Dataset" &mdash; unified <code>.fetch(flag)</code> interface with pluggable, platform-agnostic interpreters.</p>
                    <div class="module-links">
                         <a href="https://github.com/helgeesch/mesqual/blob/main/mesqual/datasets/__init__.py" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View code</a>
                        <a href="https://docs.mesqual.io/mesqual-package-documentation/api_reference/datasets/" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                    </div>
                    </div>
                    <div class="module-card">
                    <div class="module-header">
                        <i data-lucide="zap"></i>
                        <h3>Energy Data Handling</h3>
                    </div>
                    <div class="module-classes">
                        <code>AreaBorderGeometryCalculator</code>
                        <code>BorderFlowCalculator</code>
                        <code>TradeBalanceCalculator</code>
                    </div>
                    <p>Energy-domain utilities for border visualizations, area accounting, trade balances, model mixing and much more.</p>
                    <div class="module-links">
                        <a href="https://github.com/helgeesch/mesqual/blob/main/mesqual/energy_data_handling/__init__.py" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View code</a>
                        <a href="https://docs.mesqual.io/mesqual-package-documentation/api_reference/energy_data_handling/" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                    </div>
                    </div>
                    <div class="module-card">
                    <div class="module-header">
                        <i data-lucide="bar-chart-2"></i>
                        <h3>Time Series Dashboards</h3>
                    </div>
                    <div class="module-classes">
                        <code>TimeSeriesDashboardGenerator</code>
                        <code>HTMLDashboard</code>
                    </div>
                    <p>Build faceted heatmap and line dashboards from MultiIndex DataFrames using Plotly.</p>
                    <div class="module-links">
                         <a href="https://github.com/helgeesch/mesqual/blob/main/mesqual/visualizations/__init__.py" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View code</a>
                        <a href="https://docs.mesqual.io/mesqual-package-documentation/api_reference/visualization/" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                    </div>
                    </div>
                    <div class="module-card">
                    <div class="module-header">
                        <i data-lucide="map"></i>
                        <h3>Folium Viz System</h3>
                    </div>
                    <div class="module-classes">
                        <code>AreaGenerator</code>
                        <code>PropertyMapper</code>
                        <code>FeatureResolver</code>
                        <code>...</code>
                    </div>
                    <p>Create rich, interactive geospatial maps with KPI-driven styling and animated flows.</p>
                    <div class="module-links">
                         <a href="https://github.com/helgeesch/mesqual/blob/main/mesqual/visualizations/folium_viz_system/__init__.py" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View code</a>
                        <a href="https://docs.mesqual.io/mesqual-package-documentation/api_reference/visualization/folium_viz_system/" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                    </div>
                    </div>
                    <div class="module-card">
                    <div class="module-header">
                        <i data-lucide="calculator"></i>
                        <h3>KPI Framework</h3>
                    </div>
                    <div class="module-classes">
                        <code>FlagAggKPIBuilder</code>
                        <code>KPICollection</code>
                        <code>Aggregations</code>
                    </div>
                    <p>Fluent builder API for defining, computing, and filtering KPIs across scenarios.</p>
                    <div class="module-links">
                        <a href="https://github.com/helgeesch/mesqual/blob/main/mesqual/kpis/__init__.py" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View code</a>
                        <a href="https://docs.mesqual.io/mesqual-package-documentation/api_reference/kpis/" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                    </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="extensibility" class="section section-highlight">
            <div class="container">
                <div class="section-header">
                    <h2>Make It Yours</h2>
                    <p>MESQUAL's layered architecture lets you leverage the full generic framework while freely adding study-specific logic &mdash; custom data sources, variables, KPIs, and visual themes.</p>
                </div>

                <!-- Three-Tier Architecture Diagram -->
                <div class="arch-container">
                    <div class="arch-stack">
                        <div class="arch-layer arch-study">
                            <div class="arch-label">
                                <i data-lucide="flask-conical"></i>
                                <strong>Your Study</strong>
                            </div>
                            <p>Study-specific datasources, custom interpreters, variables, KPIs, color themes, merging fragmented simulations &mdash; anything specific to your analysis</p>
                            <div class="arch-badges">
                                <code>CustomRESShareInterpreter</code>
                                <code>CustomExternalEntsoePriceData</code>
                                <code>MyStudySpecificFoliumMap</code>
                                <code>...</code>
<!--                                <code>my_colorscale</code>-->
                            </div>
                        </div>
                        <div class="arch-layer arch-platform">
                            <div class="arch-label">
                                <i data-lucide="plug"></i>
                                <strong>Platform Interface</strong>
                            </div>
                            <p>Connect your modeling tool &mdash; or build your own adapter in a few lines</p>
                            <div class="arch-badges">
                                <code>mesqual-pypsa</code>
                                <code>mesqual-plexos</code>
                                <code>mesqual-???</code>
                            </div>
                        </div>
                        <div class="arch-layer arch-core">
                            <div class="arch-label">
                                <i data-lucide="box"></i>
                                <strong>MESQUAL Core</strong>
                            </div>
                            <p>Platform-agnostic foundation &mdash; StudyManager, KPIs, Visualizations, Utilities</p>
                            <div class="arch-badges">
                                <code>mesqual</code>
                            </div>
                        </div>
                    </div>
                    <div class="arch-api-line">
                        <div class="arch-api-label"><code>.fetch(flag)</code></div>
                        <div class="arch-api-arrow"></div>
                        <div class="arch-api-sublabel">Same API<br>across all layers</div>
                    </div>
                    <div class="arch-api-line">
                        <div class="arch-api-label">
                            <div class="arch-blocks-icon">
                                <span></span><span></span>
                                <span></span><span></span>
                            </div>
                        </div>
                        <div class="arch-api-arrow"></div>
                        <div class="arch-api-sublabel">Same modules<br>across all layers</div>
                    </div>
                    <div class="arch-api-line">
                        <div class="arch-api-label">
                            <div class="arch-frame-icon"></div>
                        </div>
                        <div class="arch-api-arrow"></div>
                        <div class="arch-api-sublabel">Same framework<br>for any study</div>
                    </div>
                </div>

                <!-- Extension Example Cards -->
                <h3 class="extension-heading">Extend anything with a few lines of Python</h3>
                <div class="extension-grid">
                    <div class="extension-card">
                        <div class="extension-card-header">
                            <i data-lucide="database"></i>
                            <h4>Custom Data Sources</h4>
                        </div>
                        <p>Import external data alongside simulation results &mdash; ENTSO-E market data, weather feeds, or any DataFrame that is not included in the output of your simulation platform.</p>
                        <div class="extension-code">
                            <pre><code>class EntsoeHistPriceInterpreter(Interpreter):
    accepted_flags = {'BZ.ETP.hist_price'}

    def _fetch(self, flag, config):
        parent = self.parent_dataset
        idx = parent.fetch('BZ.Results.market_price').index
        return load_historic_entsoe_data(idx)

# study.scen.fetch('BZ.ETP.hist_price')  # now works!</code></pre>
                        </div>
                    </div>
                    <div class="extension-card">
                        <div class="extension-card-header">
                            <i data-lucide="sigma"></i>
                            <h4>Custom Variables</h4>
                        </div>
                        <p>Every study has unique formulas &mdash; compute RES shares, curtailment rates, or any derived metric your way.</p>
                        <div class="extension-code">
                            <pre><code>class RESCurtailment(Interpreter):
    accepted_flags = {'countries_t.res_curtailment'}

    def _fetch(self, flag, config):
        parent = self.parent_dataset
        gen = parent.fetch('countries_t.res_gen')
        avail = parent.fetch('generators_t.availability')
        return avail - gen

# study.scen.fetch('countries_t.res_curtailment')  # now works!</code></pre>
                        </div>
                    </div>
                    <div class="extension-card">
                        <div class="extension-card-header">
                            <i data-lucide="network"></i>
                            <h4>Auto-Generate Border Models</h4>
                        </div>
                        <p>Detect area borders from granular topology &mdash; hundreds of individual transmission lines get grouped into clean border objects between countries or bidding zones.</p>
                        <div class="extension-code">
                            <pre><code># 500+ branches across 30 countries? No problem.
gen = AreaBorderModelGenerator(
    nodes, branches,
    area_column='country',
    node_from_col='bus0',
    node_to_col='bus1',
)
borders = gen.generate_area_border_model()
# → DataFrame: DE-FR, DE-PL, FR-ES, ...
# with direction, opposite_border, sorted_border
# and per-border branch membership</code></pre>
                        </div>
                    </div>
                    <div class="extension-card">
                        <div class="extension-card-header">
                            <i data-lucide="compass"></i>
                            <h4>Auto-Compute Border Geometry</h4>
                        </div>
                        <p>Borders know their area pairs, but need positions for visualization. Auto-compute line paths, midpoints, and angles from area geometries &mdash; ready for animated flow arrows.</p>
                        <div class="extension-code">
                            <pre><code># Borders exist but have no spatial information yet
geo_calc = AreaBorderGeometryCalculator(countries_gdf)
borders = gen.enhance_with_geometry(borders, geo_calc)

# Each border now carries:
#   projection_point  → optimal arrow/label placement
#   azimuth_angle     → directional angle for flow arrows
#   geo_line_string   → LineString connecting the areas
#   is_physical       → True if areas share a boundary

# Plug directly into folviz.ArrowIconGenerator!</code></pre>
                        </div>
                    </div>
                    <div class="extension-card">
                        <div class="extension-card-header">
                            <i data-lucide="globe"></i>
                            <h4>Geo-Enrich Your Model</h4>
                        </div>
                        <p>Extend simulation models with external data &mdash; here, an existing country model gets extended with GeoJSON geometries for map visualizations.</p>
                        <div class="extension-code">
                            <pre><code>class CountriesInterpreter(PyPSAInterpreter):
    accepted_flags = {'countries'}

    def _fetch(self, flag, config):
        countries = self.parent_dataset.fetch('countries')
        gdf = gpd.GeoDataFrame(
            countries,
            geometry=[get_geo(c) for c in countries.index],
        )
        self.add_projection_point_column(gdf)
        return gdf

# study.scen.fetch('countries') → GeoDataFrame with shapes and projection_points</code></pre>
                    </div>
                        </div>
                    <div class="extension-card">
                        <div class="extension-card-header">
                            <i data-lucide="braces"></i>
                            <h4>Custom KPI Definition</h4>
                        </div>
                        <p>Define domain-specific KPIs &mdash; subclass, implement <code>compute_batch</code>, and the framework handles aggregation, comparison deltas, and collection management.</p>
                        <div class="extension-code">
                            <pre><code>class AnnualizedRESShare(kpis.CustomKPIDefinition):
    def get_unit(self):
        return Units.percent

    def compute_batch(self, dataset, objects):
        gen = dataset.fetch('countries_t.generation')
        res = dataset.fetch('countries_t.res_generation')
        return (res.sum() / gen.sum() * 100).to_dict()

kpi_def = AnnualizedRESShare(kpi_flag='countries_t.annualized_res_gen')
study.scen.add_kpis_from_definitions_to_all_child_datasets([kpi_def])</code></pre>
                        </div>
                    </div>
<!--                    <div class="extension-card">-->
<!--                        <div class="extension-card-header">-->
<!--                            <i data-lucide="palette"></i>-->
<!--                            <h4>Custom Visuals</h4>-->
<!--                        </div>-->
<!--                        <p>Tailor color palettes, map styles, and dashboard themes per study &mdash; all within the same visualization framework.</p>-->
<!--                        <div class="extension-code">-->
<!--                            <pre><code>price_colors = SegmentedContinuousColorscale(-->
<!--    segments={-->
<!--        (-50, 0):  'blues_r',-->
<!--        (0, 80):   ['#2ecc71', '#f39c12'],-->
<!--        (80, 200): ['#e74c3c', '#8e44ad'],-->
<!--    }-->
<!--)</code></pre>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="extension-card">-->
<!--                        <div class="extension-card-header">-->
<!--                            <i data-lucide="layers"></i>-->
<!--                            <h4>Multi-Layer KPI Maps</h4>-->
<!--                        </div>-->
<!--                        <p>Build layered Folium maps where each KPI type gets its own visual treatment &mdash; combine colored price areas, net-position shading, and animated flow arrows in switchable groups.</p>-->
<!--                        <div class="extension-code">-->
<!--                            <pre><code>class MyMap(folviz.CustomKPIGroupGenerator):-->
<!--    def create_kpi_groups_with_names(self, source):-->
<!--        groups = []-->
<!--        for ds in source.scen.dataset_iterator:-->
<!--            col = ds.kpi_collection-->
<!--            prices = col.filter(flag='price')-->
<!--            flows = col.filter(flag='net_flow')-->
<!--            groups.append((f"{ds.name} Prices", prices + flows))-->
<!--        return groups-->

<!--    def get_generators_for_kpi(self, kpi):-->
<!--        if 'price' in kpi.attributes.flag:-->
<!--            return [self.area_gen, self.text_gen]-->
<!--        return [self.arrow_gen]</code></pre>-->
<!--                        </div>-->
<!--                    </div>-->
                </div>
            </div>
        </section>

        <section id="example-studies" class="section">
            <div class="container">
            <div class="container-side-by-side">
                <div class="text-content">
                    <h3>Explore hands-on example studies</h3>
                    <p>The <code>mesqual-vanilla-studies</code> repository demonstrates MESQUAL's capabilities through practical examples and serves as a template for organizing your own energy modeling studies.</p>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <a href="https://github.com/helgeesch/mesqual-vanilla-studies" target="_blank" class="button button-secondary button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View Repository</a>
                        <a href="https://docs.mesqual.io" target="_blank" class="button button-secondary button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Documentation</a>
                    </div>
                </div>
                <div class="studies-cards">
                    <div class="study-card">
                        <h4>Study 01: Intro to MESQUAL</h4>
                        <p>Uses a PyPSA example network to introduce the core MESQUAL modules and framework.</p>
                        <div class="study-card-links">
                            <a href="https://github.com/helgeesch/mesqual-vanilla-studies/tree/main/studies/study_01_intro_to_mesqual" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View code</a>
                            <a href="https://docs.mesqual.io/mesqual-study-01/" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                        </div>
                    </div>
                    <div class="study-card">
                        <h4>Study 02: PyPSA Eur Example</h4>
                        <p>Shows typical study workflow including custom data, variables and visuals.</p>
                        <div class="study-card-links">
                            <a href="https://github.com/helgeesch/mesqual-vanilla-studies/tree/main/studies/study_02_pypsa_eur_example" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View code</a>
                            <a href="https://docs.mesqual.io/mesqual-study-02/" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                        </div>
                    </div>
                    <div class="study-card">
                        <h4>Study 03: PLEXOS Example</h4>
                        <p>Shows the platform-agnostic nature of MESQUAL using PLEXOS simulation outputs.</p>
                        <div class="study-card-links">
                            <a href="https://github.com/helgeesch/mesqual-vanilla-studies/tree/main/studies/study_03_plexos_example" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>View code</a>
                            <a href="https://docs.mesqual.io/mesqual-study-03/" target="_blank" class="button button-secondary button-small button-with-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>Docs</a>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                 <div class="section-header">
                    <h2>Extended MESQUAL Family</h2>
                    <p>Explore other standalone and integrated libraries from the MESQUAL ecosystem.</p>
                </div>
                <div class="projects-grid">
                     <div class="project-card">
                        <i data-lucide="bot"></i>
                        <h4>mesqual-ai</h4>
                        <p>An extension for AI context, agents and MCPs within the MESQUAL framework.</p>
                    </div>
                    <div class="project-card">
                        <i data-lucide="file-code-2"></i>
                        <h4>energy-repset</h4>
                        <p>A unified framework and modular package for representative time-series subset selection.</p>
                    </div>
                     <div class="project-card">
                        <i data-lucide="arrow-right"></i>
                        <h4>captain-arro</h4>
                        <p>Create beautiful, customizable, animated SVG arrows for web interfaces with just a few lines of code.</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2026 MESQUAL Project Contributors. Licensed under LGPL v3.</p>
                <div class="footer-links">
                    <a href="#" class="footer-link">Impressum</a>
                    <a href="https://linkedin.com/in/" target="_blank" class="footer-link footer-icon-link" title="LinkedIn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        lucide.createIcons();
    </script>
    <!-- Fullscreen Overlay -->
    <div class="fullscreen-overlay" id="fullscreen-overlay">
        <button class="fullscreen-close" id="fullscreen-close" title="Close fullscreen">&times;</button>
        <div class="fullscreen-content">
            <iframe id="fullscreen-frame" src="about:blank"></iframe>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>
